# π“main topic : Java Genericμ— λ€ν•΄ μ„¤λ… ν•μ‹μ¤
> β… μ£Όμ” ν‚¤μ›λ“ : νƒ€μ… νλΌλ―Έν„°, wildcard, type erasure, μ¥/λ‹¨μ , etc

<!-- TOC -->
λ©μ°¨
* [Genericμ΄λ€?](#genericμ΄λ€)
* [Genericμ μ‚¬μ©](#genericμ-μ‚¬μ©)
  * [Generic class](#generic-class)
  * [μ λ„¤λ¦­ μ ν• μ‚¬ν•­](#μ λ„¤λ¦­-μ ν•-μ‚¬ν•­)
  * [μ ν•λ μ λ„¤λ¦­ ν΄λμ¤](#μ ν•λ-μ λ„¤λ¦­-ν΄λμ¤)
* [μ™€μΌλ“ μΉ΄λ“](#μ™€μΌλ“-μΉ΄λ“)
  * [λ¬Έμ μƒν™© μΈμ‹](#λ¬Έμ μƒν™©-μΈμ‹)
  * [μ™€μΌλ“ μΉ΄λ“λ€?](#μ™€μΌλ“-μΉ΄λ“λ€)
  * [μ™€μΌλ“ μΉ΄λ“μ μƒν•κ³Ό ν•ν•](#μ™€μΌλ“-μΉ΄λ“μ-μƒν•κ³Ό-ν•ν•)
  * [PECS(Producer-Extends, Consumer-Super) κ³µμ‹](#pecs--producer-extends-consumer-super--κ³µμ‹)
* [μ λ„¤λ¦­ λ©”μ„λ“](#μ λ„¤λ¦­-λ©”μ„λ“)
* [type erasure](#type-erasure)
* [μ λ„¤λ¦­μ μ¥μ ](#μ λ„¤λ¦­μ-μ¥μ )
<!-- TOC -->

## Genericμ΄λ€?
νƒ€μ…μ μΌλ°ν™”λ¥Ό λ§ν•λ‹¤. μ¦‰, ν΄λμ¤ λ‚΄λ¶€μ—μ„ λ°μ΄ν„° νƒ€μ…μ„ μ§€μ •ν•λ” κ²ƒμ΄ μ•„λ‹λΌ <u>μ™Έλ¶€μ—μ„</u> μ‚¬μ©μμ—μν•΄
μ§€μ •λλ” κ²ƒμ„ λ§ν•λ‹¤.

## Genericμ μ‚¬μ©
### Generic class
```java
class Box<T> {
    T item;
    void setItem(T item) {this.item = item;}
}
```
ν΄λμ¤ λ‚΄λ¶€ κµ¬ν„μ—μ„  κΊΎμ‡ (`<>`)μ™€ ν•¨κ» μ λ„¤λ¦­μ„ μ„ μ–Έν•λ‹¤.  
`T`λ” νƒ€μ… λ³€μ νΉμ€ νƒ€μ… λ§¤κ°λ³€μλ¥Ό μλ―Έν•λ‹¤.(`Type Parameter`)  
μ΄κ²ƒμ„ λ§¤κ°λ³€μλΌκ³  μΉ­ν•λ” κ²ƒμ€ λ©”μ„λ“μ λ§¤κ°λ³€μ(νλΌλ―Έν„°)μ™€ μ μ‚¬ν• λ©΄μ΄ λ§κΈ° λ•λ¬Έμ΄λ‹¤.

### μ λ„¤λ¦­ μ ν• μ‚¬ν•­  
1. static λ©¤λ²„,λ©”μ„λ“μ— νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•  μ μ—†λ‹¤.
```java  
class Box<T> {
    static T item;  //λ¶κ°€
    static int compare(T t1, T t2); //λ¶κ°€
```
μ΄κ²ƒμ€ μ μ‹ μƒκ°ν•΄λ³΄λ©΄ λ‹Ήμ—°ν• μ–κΈ°μ΄λ‹¤. `static`ν‚¤μ›λ“λ” μΈμ¤ν„΄μ¤ λ³€μλ¥Ό μ°Έμ΅°ν•  μμ—†λ‹¤. λ©”μ„λ“λ„ λ§μ°¬κ°€μ§€μ΄λ‹¤.
νƒ€μ… νλΌλ―Έν„°λ” μΈμ¤ν„΄μ¤ λ³€μμ™€ κ°™μ΄ λ™μ‘ν•λ‹¤.

2. new μ—°μ‚°μ μ‚¬μ©λ¶κ°€

```java 
class Box<T> {
    T[] itemArr;  //κ°€λ¥
    T[] toArray() {
        T[] arr = new T[itemArr.length];  //λ¶κ°€
        //...
        return arr;
    }
}
```
new ν‚¤μ›λ“λ” μ»΄νμΌ μ‹μ μ— νƒ€μ…μ„ μ •ν™•ν μ•μ•„μ•Όν•λ‹¤. `Box`ν΄λμ¤ μ»΄νμΌ μ‹μ μ—μ„λ”
`T`κ°€ λ¬΄μ—‡μ΄ λ μ§€ μ• μ μ—†μΌλ―€λ΅ new ν‚¤μ›λ“λ¥Ό μ‚¬μ©ν•  μ μ—†λ” κ²ƒμ΄λ‹¤
μ΄μ™€ κ°™μ€ μ΄μ λ΅ `instanceOf`λ„ μ‚¬μ©ν•  μ μ—†λ‹¤.

3. νƒ€μ…μ μΌμΉ
```java
Box<Apple> box = new Box<Apple>(); //ok
Box<Fruit> box = new Box<Apple>(); //no
```
μƒμ„±μμ νƒ€μ…κ³Ό ν΄λμ¤μ νƒ€μ… νλΌλ―Έν„°λ” ν•­μƒ μΌμΉν•΄μ•Όν•λ‹¤. μƒμ†λ„ ν—μ©ν•μ§€ μ•λ”λ‹¤.

### μ ν•λ μ λ„¤λ¦­ ν΄λμ¤
νƒ€μ… νλΌλ―Έν„°λ” λ¨λ“  μΆ…λ¥μ νƒ€μ…μ„ μ§€μ •ν•λ‹¤. μ΄λ•, νƒ€μ…μ μΆ…λ¥λ¥Ό μ ν•ν•κ³  μ‹¶λ‹¤λ©΄ μ–΄λ–¤ λ°©λ²•μ΄ μμ„κΉ?

```java 
class Box<T extends Fruit> {
    ArrayList<T> list= new ArrayList();
    void add(T fruit) {list.add(fruit);}
}
```
μ„μ ν΄λμ¤λ” `Fruit`λ¥Ό μƒμ†ν•λ” νƒ€μ…μ— λ€ν•΄μ„λ§ ν—μ©ν•λ‹¤. λν• μΈν„°νμ΄μ¤μ κ²½μ° `implements`λ¥Ό μ‚¬μ©ν•λ”κ²ƒμ΄ μ•„λ‹λΌ
μ„μ™€ κ°™μ΄ `extends`λ¥Ό μ‚¬μ©ν•λ‹¤.

λν• μ΄λ ‡κ² μ ν•μ„ κ±Έμ—μ„ κ²½μ° μ¥μ μ΄ λ°μƒν•λ‹¤.
```java
FruitBox<Fruit> fruitBox = new FruitBox<Apple>();
fruitBox.add(new Apple());
fruitBox.add(new Grape());
```
`add`λ©”μ„λ“μ λ§¤κ°λ³€μλ΅ `T`μ μμ† νƒ€μ…μ„ μ‚¬μ©ν•λ” κ²ƒμ΄ κ°€λ¥ν•΄μ§„λ‹¤.

## μ™€μΌλ“ μΉ΄λ“

### λ¬Έμ μƒν™© μΈμ‹
```java 
class Juicer{ 
    static Juice makeJuice(FruitBox<Fruit> box) { //κ³ΌμΌμ„ κ±΄λ„¤ λ°›μ•„ μ£Όμ¤λ΅ λ§λ“¤μ–΄μ£Όλ” λ©”μ„λ“
        String tmp = "";
        for (Fruit f : box.getFruitList()) {
            tmp += f;
        }
        return tmp;
    }
}
```
ν„μ¬ `Juicer`λ” μ λ„¤λ¦­ ν΄λμ¤κ°€ μ•„λ‹λ‹¤. λ”°λΌμ„ `makeJuice`μ λ§¤κ°λ³€μμ μ λ„¤λ¦­ νƒ€μ…μ΄ `Fruit`μΌλ΅ κ³ μ •λμ–΄μλ‹¤.
μ΄λ–„λ” `Juicer.makeJukce(new FruitBox<Apple>())` μ νΈμ¶μ΄ λ¶κ°€λ¥ ν•λ‹¤. <u>μ™ λ¶κ°€λ¥ ν• κΉ????</u>
μ΄κ²ƒμ€ κ²°κµ­ λ‹¤μκ³Ό κ°™μ€ μ—λ¬κ°€ μκΈ° λ•λ¬Έμ΄λ‹¤.
    
    FruitBox<Fruit> box = new FruitBox<Apple>();
μ΄λ―Έ μ„μ—μ„ μƒμ„±μμ μ λ„¤λ¦­μ€ ν΄λμ¤μ μ λ„¤λ¦­κ³Ό μ™„μ „ν μΌμΉν•΄μ•Όν•λ‹¤λ” μ‚¬μ‹¤μ„ μ•κΈ° λ•λ¬Έμ—
μ΄κ²ƒμ΄ λ¶κ°€λ¥ ν•λ‹¤λ” κ²ƒ λν• λ‹Ήμ—°ν•΄μ§€λ” κ²ƒμ΄λ‹¤. <u>μ¦‰, μ λ„¤λ¦­μ μ—„κ²©ν• νƒ€μ… μΌμΉκ°€ λ‹¤ν•μ„±μ μ‚¬μ©μ— μ μ•½μ„ κ±Έμ–΄λ²„λ¦°λ‹¤.</u> μ΄μ™€ κ°™μ€ μƒν™©μ„ ν•΄κ²°ν•΄ μ£Όλ”κ²ƒμ΄
μ™€μΌλ“ μΉ΄λ“μ΄λ‹¤.

### μ™€μΌλ“ μΉ΄λ“λ€?
μ™€μΌλ“ μΉ΄λ“λ” μ •ν•΄μ§€μ§€ μ•μ€ `unknown` typeμΌλ΅ λ¨λ“  νƒ€μ…μ„ λ€μ‹ ν•λ‹¤.
μ„μ™€ κ°™μ€ μƒν™©μ—μ„ μ™€μΌλ“ μΉ΄λ“λ¥Ό μ‚¬μ©ν•¨μΌλ΅μ¨ μ μ—°ν• μ½”λ“λ΅ λ€μ²΄ν•λ‹¤.

```java
class Juicer{ 
    static Juice makeJuice(FruitBox<? extends Fruit> box) { //κ³ΌμΌμ„ κ±΄λ„¤ λ°›μ•„ μ£Όμ¤λ΅ λ§λ“¤μ–΄μ£Όλ” λ©”μ„λ“
        String tmp = "";
        for (Fruit f : box.getFruitList()) {
            tmp += f;
        }
        return tmp;
    }
}
```
`FruitBox`μ μ λ„¤λ¦­μ΄ μ™€μΌλ“μΉ΄λ“ `?`μ„ μ‚¬μ©ν•λ”κ²ƒμΌλ΅ λ°”λ€μ—λ‹¤. μ¦‰ `Fruit`μ μμ† νƒ€μ…μ„ λ¨λ‘ ν—μ©ν•λ‹¤λ” λ»μ΄λ‹¤.
λ§μ•½ `<?>`λ¥Ό μ‚¬μ©ν• μ‹ λ¨λ“  νƒ€μ…μ„ ν—μ©ν•λ‹¤.


### μ™€μΌλ“ μΉ΄λ“μ μƒν•κ³Ό ν•ν•
νƒ€μ… λ§¤κ°λ³€μλ¥Ό μ‚¬μ©ν•  λ•λ” `extends`ν‚¤μ›λ“ λ°–μ— μ‚¬μ©ν•μ§€ λ»ν–μ§€λ§ μ™€μΌλ“ μΉ΄λ“μ—μ„  `super`λ¥Ό μ‚¬μ©ν• ν•ν•μ„ μ ν•ν•  μ μλ‹¤.
ν•μ§€λ§ μƒν•κ³Ό ν•ν•μ„ μ‚¬μ©ν•  λ•λ” λ‡κ°€μ§€ μ£Όμμ μ΄ μλ‹¤. 

+ `extends` μ‚¬μ©μ‹(μ†λ¨)
```java
void addElement(Collection<? extends MyParent> c) {
    c.add(new MyChild());        // λ¶κ°€λ¥(μ»΄νμΌ μ—λ¬)
    c.add(new MyParent());       // λ¶κ°€λ¥(μ»΄νμΌ μ—λ¬)
    c.add(new MyGrandParent());  // λ¶κ°€λ¥(μ»΄νμΌ μ—λ¬)
    c.add(new Object());         // λ¶κ°€λ¥(μ»΄νμΌ μ—λ¬)
}
```
`MyParent`ν΄λμ¤μ μμ†νƒ€μ…μ€ λ¨λ‘ ν—μ©ν•λ―€λ΅ `MyParent`, `MyChild`ν΄λμ¤λ¥Ό λ¨λ‘ ν—μ©ν•κ² μ§€λ§,
μ‹¤μ  μ»¬λ ‰μ…μ μ λ„¤λ¦­μ΄ `AnotherChild`μΈ κ²½μ° λ‘ λ¨λ‘ ν•΄λ‹Ή νƒ€μ…μΌλ΅ ν•λ³€ν™μ΄ λ¶κ°€λ¥ν•κΈ° λ•λ¬Έμ— μ• μ΄μ— μ»΄νμΌ μ¤λ¥κ°€ λ‚λ‹¤.
μ„μ™€ κ°™μ€ μƒν™©μ€ νλΌλ―Έν„°λ¥Ό μ†λ¨ν•λ” `Consume` μƒν™©μ΄λ‹¤.

+ `super` μ‚¬μ©μ‹ (κ³µκΈ‰)
```java
void printCollection(Collection<? super MyParent> c) {
    // λ¶κ°€λ¥(μ»΄νμΌ μ—λ¬)
    for (MyChild e : c) {
        System.out.println(e);
    }

    // λ¶κ°€λ¥(μ»΄νμΌ μ—λ¬)
    for (MyParent e : c) {
        System.out.println(e);
    }

    // λ¶κ°€λ¥(μ»΄νμΌ μ—λ¬)
    for (MyGrandParent e : c) {
        System.out.println(e);
    }

    for (Object e : c) {
        System.out.println(e);
    }
}
```
`MyParent` λ¶€λ¨ νƒ€μ…λ“¤μ€ λ¨λ‘ ν—μ©ν•  κ²ƒμ΄λ‹¤. ν•μ§€λ§ μ„μ™€ λ§μ°¬κ°€μ§€λ΅ μ •ν•΄μ§€μ§€ μ•μ•κΈ°μ— ν•λ³€ν™μ κ°€λ¥μ„±μ΄ λ³΄μ¥ λ  μ μ—†λ‹¤.
λ”°λΌμ„ μ»΄νμΌ μ¤λ¥κ°€ λ‚λ” κ²ƒμ΄λ‹¤. ν•μ§€λ§ `Object`λ” λ¨λ“  ν΄λμ¤μ μ΅°μƒμ΄κΈ° λ•λ¬Έμ— μ–Έμ λ“ μ§€ ν•λ³€ν™μ΄ κ°€λ¥ν•λ―€λ΅
ν—μ©λλ‹¤.

### PECS(Producer-Extends, Consumer-Super) κ³µμ‹
μ»¬λ ‰μ…μΌλ΅λ¶€ν„° μ™€μΌλ“μΉ΄λ“ νƒ€μ…μ κ°μ²΄λ¥Ό μƒμ„± λ° λ§λ“¤λ©΄ `extends`λ¥Ό , κ°–κ³  μλ” κ°μ²΄λ¥Ό μ»¬λ ‰μ…μ— μ‚¬μ© λλ” μ†λΉ„ ν•λ©΄
superλ¥Ό μ‚¬μ©ν•λΌλ” κ²ƒ.

```java
void printCollection(Collection<? extends MyParent> c) {
    for (MyParent e : c) {
        System.out.println(e);
    }
}

void addElement(Collection<? super MyParent> c) {
    c.add(new MyParent());
}
```

## μ λ„¤λ¦­ λ©”μ„λ“
ν΄λμ¤ λ‹¨μ„κ°€ μ•„λ‹ λ©”μ„λ“μ—μ„λ„ νƒ€μ… νλΌλ―Έν„°λ¥Ό μ μ©ν•  μ μλ”λ° μ΄κ²ƒμ„ μ λ„¤λ¦­ λ©”μ„λ“λΌν•λ‹¤.
ν΄λμ¤μ μ λ„¤λ¦­μ„ μ‚¬μ©ν•  μ μ—†λ `static`λ©”μ„λ“μ— λ§μ΄ μ‚¬μ©λλ‹¤.(μΌλ° μΈμ¤ν„΄μ¤ λ©”μ„λ“μ—μ„λ„ μ‚¬μ©κ°€λ¥)
ν΄λμ¤μ μ λ„¤λ¦­κ³Ό μ λ„¤λ¦­ λ©”μ„λ“μ νƒ€μ…νλΌλ―Έν„° `T`λ΅ κ°™μ•„λ„ μ΄ λ‘μ€ μ™„μ „ν κµ¬λ¶„λλ©° μ „ν€ μƒκ΄€μ΄μ—†λ‹¤.

> static λ©”μ„λ“μ— μ–΄λ–»κ² μ λ„¤λ¦­μ΄ μ‚¬μ© κ°€λ¥ν•κ°€? 
> <br>
> ν΄λμ¤μ μ λ„¤λ¦­μ€ λ‹Ήμ—°ν staticν‚¤μ›λ“κ°€ λ¶™μ€ λ³€μμ™€ λ©”μ„λ“μ— μ μ©μ΄ λ  μ μ—†λ” κ²ƒμ€ λ‹Ήμ—°ν•λ‹¤.
> κ·Έλ ‡μ§€λ§ static λ©”μ„λ“μ—λ” μ λ„¤λ¦­ λ©”μ„λ“λΌλ” κ²ƒμ΄ μμ–΄ μ΄κ²ƒμ„ μ΄μ©ν•΄ μ λ„¤λ¦­μ„ ν™μ©ν•  μ μλ‹¤.
> κ·Έ μ΄μ λ” λ©”μ„λ“μ—μ„ λ„μ–΄μ¤λ” νλΌλ―Έν„°λ¥Ό ν†µν•΄ μ μ¶”ν•  μ μκΈ° λ•λ¬Έμ΄λ‹¤. λ°λ©΄ static λ³€μλ” κ°’ μμ²΄κ°€ κ³µμ λμ–΄ λ²„λ ¤μ„
> νƒ€μ…μ„ λ¨λ¥΄λ”λ° κ³µμ λ¥Ό ν•  μλ„ μ—†μ„ λΏλ”λ¬, κ³µμ ν•  μ΄μ κ°€ μ—†λ‹¤.

```java
public static <T extends CharSequence> void printFirstChar(T param) {
    System.out.println(param.charAt(0));
}
```
## type erasure
μ λ„¤λ¦­μ€ JDK 1.5 λ²„μ „μ— μ²μ λ„μ… λμ—λ‹¤. κ·Έλ ‡λ‹¤λ©΄ μ΄μ „ λ²„μ „μ—μ„λ” μ λ„¤λ¦­μ΄ λ„μ…λκΈ°μ „μ μλ°” λ²„μ „μ μ½”λ“λ“¤κ³Όμ
νΈν™μ„±μ„ μ„ν•΄ μ»΄νμΌ ν›„ μ λ„¤λ¦­ νƒ€μ…μ„ μ†κ±°ν•λ‹¤. μ΄κ²ƒμ„ `type erasure`λΌκ³  ν•λ‹¤.
`type erasure`λ” λ‹¤μκ³Ό κ°™μ€ κ·μΉ™μ„ κ°€μ§„λ‹¤.
+ λ¨λ“  νƒ€μ… νλΌλ―Έν„°λ¥Ό κ·Έλ“¤μ λ°”μ΄λ“λ‚ Object νƒ€μ…μΌλ΅ κµμ²΄ν•λ‹¤.
+ μ λ„¤λ¦­ νƒ€μ…μ„ μ κ±°ν• ν›„ νƒ€μ…μ΄ μΌμΉν•μ§€ μ•μΌλ©΄ νƒ€μ… μΊμ¤ν…μ„ μ¶”κ°€ν•λ‹¤
+ ν™•μ¥λ(extended) μ λ„¤λ¦­ νƒ€μ…μ λ‹¤ν•μ„±μ„ λ³΄μ΅΄ν•κΈ° μ„ν•΄ λΈλ¦Ώμ§€ λ©”μ„λ“λ¥Ό μƒμ„±ν•λ‹¤.


## μ λ„¤λ¦­μ μ¥μ 
1. νƒ€μ…μ λ¶μΌμΉλ¥Ό μ»΄νμΌ λ‹¨κ³„μ—μ„ λ°©μ§€ ν•  μ μλ”°.
2. λ¶ν•„μ”ν• νƒ€μ…λ³€ν™μ„ μ¤„μ—¬μ¤€λ‹¤.
